(()=>{"use strict";var e,t={120:(e,t,r)=>{var o=r(196);const l=window.wp.i18n,a=window.wp.blockEditor,n=window.wp.components,i=window.wp.primitives;var s=r(704);const c=(0,s.jsx)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)(i.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})}),d=window.wp.blocks,p=JSON.parse('{"u2":"wporg/site-screenshot"}'),m=window.wp.editor,u=window.wp.editPost,w=window.wp.plugins,g=window.wp.data,_=window.wp.element,h=(0,_.forwardRef)((function({icon:e,size:t=24,...r},o){return(0,_.cloneElement)(e,{width:t,height:t,...r,ref:o})})),f=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,s.jsx)(i.Path,{d:"M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"})}),E=window.wp.coreData,b=window.wp.compose,v="#f6f6f6",y=function({label:e,description:t}){const[r,a]=(0,_.useState)(!0),i=(0,g.useSelect)((e=>e(m.store).getEditedPostAttribute("type")),[]),[s,c]=(0,E.useEntityProp)("postType",i,"meta"),d=s["feature-color"]||v,p=e=>{const t=e.startsWith("#")?e:"#"+e;c({...s,"feature-color":t})},u=d.replace("#",""),w=/^[0-9a-f]+$/.test(u)&&[3,4,6,8].includes(u.length),y=!!s["screenshot-desktop"],k=(0,b.usePrevious)(y);return(0,_.useEffect)((()=>{void 0!==k&&!k&&y&&(u!==v.replace("#","")?a(!1):p(""))}),[y,u]),(0,o.createElement)("div",{className:"wporg-site-color"},(0,o.createElement)(n.BaseControl.VisualLabel,null,e),(0,o.createElement)("p",null,t),y&&(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Use color from image","wporg"),checked:r,onChange:()=>{const e=!r;p(e?"":v),a(e)}}),(!r||!y)&&(0,o.createElement)(n.PanelRow,null,w?(0,o.createElement)(n.ColorIndicator,{colorValue:d}):(0,o.createElement)(h,{fill:"#cc1818",icon:f}),(0,o.createElement)(n.TextControl,{label:e,hideLabelFromVision:!0,value:d,onChange:p}),(0,o.createElement)(n.Button,{onClick:()=>p(v)},(0,l.__)("Reset","wporg"))))},k=window.wp.blob,C=(0,o.createElement)("p",null,(0,l.__)("To edit the featured image, you need permission to upload media.","wporg")),S=(0,b.compose)(n.withNotices)((function({metaKey:e,label:t,noticeUI:r,noticeOperations:i}){const{meta:s,media:c,mediaId:d,mediaUpload:p}=(0,g.useSelect)((t=>{const r=t(m.store).getEditedPostAttribute("meta"),o=r[e];return{meta:r,mediaId:o,media:o?t(E.store).getMedia(o,{context:"view"}):null,mediaUpload:t(a.store).getSettings().mediaUpload}}),[]),{editPost:u}=(0,g.useDispatch)(m.store),w=(0,_.useRef)(),[h,f]=(0,_.useState)(!1),{mediaWidth:b,mediaHeight:v,mediaSourceUrl:y}=function(e,t="screenshot-desktop"){var r;return e?t in(null!==(r=e?.media_details?.sizes)&&void 0!==r?r:{})?{mediaWidth:e.media_details.sizes[t].width,mediaHeight:e.media_details.sizes[t].height,mediaSourceUrl:e.media_details.sizes[t].source_url}:{mediaWidth:e.media_details.width,mediaHeight:e.media_details.height,mediaSourceUrl:e.source_url}:{}}(c,e),S=t=>{u({meta:{...s,[e]:t.id}})},x=e=>{p({allowedTypes:["image"],filesList:e,onFileChange:([e])=>{(0,k.isBlobURL)(e?.url)?f(!0):(S(e),f(!1))},onError:e=>{i.removeAllNotices(),i.createErrorNotice(e)}})};return(0,o.createElement)(o.Fragment,null,r,(0,o.createElement)("div",{className:"wporg-site-screenshot"},c&&(0,o.createElement)("div",{id:`wporg-site-screenshot-${d}-describedby`,className:"hidden"},c.alt_text&&(0,l.sprintf)(// Translators: %s: The selected image alt text.
(0,l.__)("Current image: %s","wporg"),c.alt_text),!c.alt_text&&(0,l.sprintf)(// Translators: %s: The selected image filename.
(0,l.__)("The current image has no alternative text. The file name is: %s","wporg"),c.media_details.sizes?.full?.file||c.slug)),(0,o.createElement)(a.MediaUploadCheck,{fallback:C},(0,o.createElement)(a.MediaUpload,{onSelect:S,unstableFeaturedImageFlow:!0,allowedTypes:["image"],render:({open:r})=>(0,o.createElement)("div",{className:"wporg-site-screenshot__container"},(0,o.createElement)(n.Button,{ref:w,className:d?"wporg-site-screenshot__preview":"wporg-site-screenshot__toggle",onClick:r,"aria-label":d?(0,l.__)("Edit or replace the image","wporg"):null,"aria-describedby":d?`wporg-site-screenshot-${d}-describedby`:null},!!d&&c&&(0,o.createElement)(n.ResponsiveWrapper,{naturalWidth:b,naturalHeight:v,isInline:!0},(0,o.createElement)("img",{src:y,alt:""})),h&&(0,o.createElement)(n.Spinner,null),!d&&!h&&t),!!d&&(0,o.createElement)("div",{className:"wporg-site-screenshot__actions"},(0,o.createElement)(n.Button,{className:"wporg-site-screenshot__action",onClick:r,"aria-hidden":"true"},(0,l.__)("Replace","wporg")),(0,o.createElement)(n.Button,{className:"wporg-site-screenshot__action",onClick:()=>{u({meta:{...s,[e]:0}}),w.current.focus()}},(0,l.__)("Remove","wporg"))),(0,o.createElement)(n.DropZone,{onFilesDrop:x})),value:d}))))}));(0,w.registerPlugin)("wporg-screenshots-panel",{render:()=>"post"!==(0,g.useSelect)((e=>e(m.store).getEditedPostAttribute("type")),[])?null:(0,o.createElement)(u.PluginDocumentSettingPanel,{name:"wporg-screenshots",title:(0,l.__)("Screenshots","wporg")},(0,o.createElement)(S,{metaKey:"screenshot-desktop",label:(0,l.__)("Desktop","wporg")}),(0,o.createElement)("p",null,(0,l.__)("Capture a desktop image at 1920 wide by 1080 tall, use at least 2x dpi.","wporg")),(0,o.createElement)("hr",null),(0,o.createElement)(S,{metaKey:"screenshot-mobile",label:(0,l.__)("Mobile","wporg")}),(0,o.createElement)("p",null,(0,l.__)("Capture a mobile image at 375 wide by 667 tall, use at least 2x dpi.","wporg")),(0,o.createElement)("hr",null),(0,o.createElement)(y,{label:(0,l.__)("Color","wporg"),description:(0,l.__)("Feature color to use as header background.","wporg")}))}),(0,d.registerBlockType)(p.u2,{edit:function({attributes:{isLink:e,lazyLoad:t,type:r},setAttributes:i}){return(0,o.createElement)("div",{...(0,a.useBlockProps)()},(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Settings","wporg")},(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Make image link to Post","wporg"),checked:e,onChange:()=>i({isLink:!e})}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Lazy load image","wporg"),checked:t,onChange:()=>i({lazyLoad:!t})}),(0,o.createElement)(n.SelectControl,{label:(0,l.__)("Image","wporg"),value:r,options:[{label:(0,l.__)("Desktop","wporg"),value:"desktop"},{label:(0,l.__)("Mobile","wporg"),value:"mobile"}],onChange:e=>i({size:e})}))),(0,o.createElement)(n.Placeholder,{icon:c,label:(0,l.__)("Site Screenshot","wporg")}))},save:()=>null})},801:(e,t,r)=>{var o=r(196),l=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),n=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,r){var o,s={},c=null,d=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,o)&&!i.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:l,type:e,key:c,ref:d,props:s,_owner:n.current}}},704:(e,t,r)=>{e.exports=r(801)},196:e=>{e.exports=window.React}},r={};function o(e){var l=r[e];if(void 0!==l)return l.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,r,l,a)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,l,a]=e[d],i=!0,s=0;s<r.length;s++)(!1&a||n>=a)&&Object.keys(o.O).every((e=>o.O[e](r[s])))?r.splice(s--,1):(i=!1,a<n&&(n=a));if(i){e.splice(d--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,l,a]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={787:0,529:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var l,a,[n,i,s]=r,c=0;if(n.some((t=>0!==e[t]))){for(l in i)o.o(i,l)&&(o.m[l]=i[l]);if(s)var d=s(o)}for(t&&t(r);c<n.length;c++)a=n[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},r=globalThis.webpackChunkwporg_showcase_2022_theme=globalThis.webpackChunkwporg_showcase_2022_theme||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=o.O(void 0,[529],(()=>o(120)));l=o.O(l)})();